(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{6276:function(e,a,r){Promise.resolve().then(r.bind(r,6336))},6336:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return l}});var t=r(7437),s=r(2265),d=r(1169),n=r(5946),o=()=>{(0,d.useRouter)();let[e,a]=(0,s.useState)(!1),[r,o]=(0,s.useState)({phoneNumber:"",message:"",scheduledDate:"",scheduledTime:"",type:"unique"}),l=async e=>{e.preventDefault(),a(!0);try{if(!r.phoneNumber.startsWith("+")){alert("El n\xfamero debe incluir el c\xf3digo de pa\xeds (ej: +521234567890)"),a(!1);return}if(new Date("".concat(r.scheduledDate,"T").concat(r.scheduledTime))<=new Date){alert("La fecha y hora deben ser futuras"),a(!1);return}await (0,n.PV)(r),window.location.href="/"}catch(e){console.error("Error al crear mensaje:",e),alert("Error al crear el mensaje. Por favor, intenta de nuevo.")}finally{a(!1)}},i=e=>{let{name:a,value:r}=e.target;o(e=>({...e,[a]:r}))},c=new Date().toISOString().split("T")[0];return(0,t.jsxs)("form",{onSubmit:l,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"N\xfamero de tel\xe9fono (con c\xf3digo de pa\xeds)"}),(0,t.jsx)("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,onChange:i,placeholder:"+521234567890",required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Ejemplo: +521234567890 (incluye el + y c\xf3digo de pa\xeds)"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mensaje"}),(0,t.jsx)("textarea",{id:"message",name:"message",value:r.message,onChange:i,rows:5,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Escribe tu mensaje aqu\xed..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"scheduledDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha"}),(0,t.jsx)("input",{type:"date",id:"scheduledDate",name:"scheduledDate",value:r.scheduledDate,onChange:i,min:c,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"scheduledTime",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hora"}),(0,t.jsx)("input",{type:"time",id:"scheduledTime",name:"scheduledTime",value:r.scheduledTime,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de mensaje"}),(0,t.jsxs)("select",{id:"type",name:"type",value:r.type,onChange:i,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,t.jsx)("option",{value:"unique",children:"\xdanico (se env\xeda una vez)"}),(0,t.jsx)("option",{value:"daily",children:"Diario (se repite cada d\xeda a la misma hora)"}),(0,t.jsx)("option",{value:"biweekly",children:"Cada dos semanas (se repite cada 14 d\xedas)"}),(0,t.jsx)("option",{value:"monthly",children:"Mensual (se repite cada mes)"})]}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"unique"===r.type?"El mensaje se enviar\xe1 solo una vez en la fecha y hora programada":"daily"===r.type?"El mensaje se enviar\xe1 autom\xe1ticamente cada d\xeda a la misma hora":"biweekly"===r.type?"El mensaje se enviar\xe1 autom\xe1ticamente cada 14 d\xedas a la misma hora":"El mensaje se enviar\xe1 autom\xe1ticamente cada mes a la misma hora"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",disabled:e,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Guardando...":"Programar Mensaje"}),(0,t.jsx)("button",{type:"button",onClick:()=>window.location.href="/",className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"})]})]})};function l(){return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[(0,t.jsxs)("header",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Programar Nuevo Mensaje"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Completa el formulario para programar un mensaje de WhatsApp"})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:(0,t.jsx)(o,{})})]})})}},8407:function(e,a,r){"use strict";let t,s,d;r.d(a,{db:function(){return s},w:function(){return d}});var n=r(5236),o=r(9842),l=r(8116);(t=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyC_BrUol1kheBg5rRrwGPFbCDx5HMf7pkA",authDomain:"whatsapp-scheduler-2105b.firebaseapp.com",projectId:"whatsapp-scheduler-2105b",storageBucket:"whatsapp-scheduler-2105b.firebasestorage.app",messagingSenderId:"890959892342",appId:"1:890959892342:web:7f2dbe877f50460485f457"}))&&(s=(0,o.ad)(t),d=(0,l.$C)(t))},5946:function(e,a,r){"use strict";r.d(a,{PO:function(){return l},PV:function(){return n},gD:function(){return o}});var t=r(9842),s=r(8407);let d="scheduledMessages",n=async e=>{if(!s.db)throw Error("Firebase no est\xe1 inicializado");let a=new Date("".concat(e.scheduledDate,"T").concat(e.scheduledTime)),r={phoneNumber:e.phoneNumber,message:e.message,scheduledDate:t.EK.fromDate(a),type:e.type,status:"pending",createdAt:t.EK.now()};return(await (0,t.ET)((0,t.hJ)(s.db,d),r)).id},o=async e=>{if(!s.db)throw Error("Firebase no est\xe1 inicializado");await (0,t.oe)((0,t.JU)(s.db,d,e))},l=e=>{if(!s.db)return console.error("Firebase no est\xe1 inicializado"),()=>{};let a=(0,t.IO)((0,t.hJ)(s.db,d),(0,t.Xo)("scheduledDate","asc"));return(0,t.cf)(a,a=>{e(a.docs.map(e=>{var a;let r=e.data();return{id:e.id,phoneNumber:r.phoneNumber,message:r.message,scheduledDate:r.scheduledDate.toDate(),type:r.type,status:r.status,createdAt:r.createdAt.toDate(),sentAt:null===(a=r.sentAt)||void 0===a?void 0:a.toDate(),errorMessage:r.errorMessage}}))})}}},function(e){e.O(0,[358,33,971,23,744],function(){return e(e.s=6276)}),_N_E=e.O()}]);